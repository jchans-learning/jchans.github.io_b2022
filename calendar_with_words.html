<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
  </head>
  <body>
    <canvas id="myCanvas" width="400" height="400" style="border:1px solid #000000"></canvas>

    <script>

      function wrapText(context, text, x, y, maxWidth, lineHeight)
        {
          var words = text.split("。");
          var line = "";

          for (var n = 0; n < words.length; n++)
          {
            var testLine = line + words[n] + " ";
            var metrics = context.measureText(testLine);
            var testWidth = metrics.width;
            if (testWidth > maxWidth)
            {
              context.fillText(line, x, y);
              line = words[n] + " ";
              y += lineHeight;
            }
            else {
              line = testLine;
            }
          }
          context.fillText(line, x, y);
        }

        window.onload = function ()
          {
            var canvas = document.getElementById("myCanvas");
            var context = canvas.getContext("2d");
            var maxWidth = 300;
            var lineHeight = 25;
            var x = (canvas.width - maxWidth) / 2;
            var y = 60;
            var text = "要研究一下換行的方式。還有解決文字模糊的問題。";

            context.font = "16pt Arial";
            context.fillStyle = "#333";

            wrapText(context, text, x, y, maxWidth, lineHeight);
          };

      var c = document.getElementById("myCanvas");
      var ctx = c.getContext("2d");
      ctx.fillStyle="#CCCCCC";
      ctx.fillRect(0, 0, 500, 500);
    </script>

  </body>
</html>
